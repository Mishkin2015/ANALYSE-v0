<%! from django.utils.translation import ugettext as _ %>
<%! import ast %>
<%inherit file="../main.html" />
<%namespace name='static' file='/static_content.html'/>
<%namespace name='static' file='/static_content.html'/>
<%namespace name="video_progress" file="/xinsider/video_progress.js"/>
<%namespace name="total_video_time" file="/xinsider/all_video_time.js"/>
<%namespace name="total_problem_time" file="/xinsider/per_problem_time.js"/>
<%namespace name="video_intervals_stu" file="/xinsider/video_intervals_stu.js"/>
<%namespace name="video_daily" file="/xinsider/video_daily.js"/>
<%namespace name="video_events_dispersion" file="/xinsider/video_events_dispersion.js"/>

<%block name="headextra">
<%static:css group='style-course-vendor'/>
<%static:css group='style-course'/>
 <script type="text/javascript" src="https://www.google.com/jsapi"></script>
 <!-- Load the Visualization API and the charts packages. -->
 <script>
   google.load('visualization', '1.0', {'packages':['corechart', 'timeline']});
 </script>
 <script type="text/javascript"> ${video_progress.body(video_prog_json)} </script>
  <script type="text/javascript"> ${total_video_time.body(video_distrib_json)} </script>
  <script type="text/javascript"> ${total_problem_time.body(problem_distrib_json)} </script>
  <script type="text/javascript"> ${video_intervals_stu.body(video_intervals_array)} </script>
  <script type="text/javascript"> ${video_daily.body(vid_and_prob_daily_time)} </script>
  <script type="text/javascript"> ${video_events_dispersion.body(scatter_array)} </script>
  
  <%include file="/xinsider/update_chart.html" />
</%block>

<%block name="pagetitle">${_("{course_number} Learning Analytics").format(course_number=course.display_number_with_default)}</%block>

<%include file="/dashboard/_dashboard_prompt_midcourse_reverify.html" />

<%include file="/courseware/course_navigation.html" args="active_page='learning_analytics'" />

<div class="container">
	<div class="profile-wrapper">
		<div class="learning-analytics" >
			<header>
				<h1>${_("Analytics for course: {course}").format(course=course.display_name)}</h1>
			</header>
			% if instructor_access or staff_access:
			<h2>Instructor learning analytics</h2>
			% else:
			<h2>Student learning analytics</h2>
			% endif
			<div class="visualizations">
				% if instructor_access or staff_access:
				
				<%include file="course_sort_students.html" />
				<%include file="students_grades.html" />
				<%include file="chapter_time.html" />
				<%include file="course_accesses.html" />
                <%include file="students_time_schedule.html" />
                
				% else:
				
				<%include file="students_grades.html" />
				<%include file="chapter_time.html" />
				<%include file="course_accesses.html" />
				<%include file="students_time_schedule.html" />
				
				% endif
			<section>
			    <div class="sidebar">
			        <h2>Video time watched</h2>
			        <p>
			            blablalbalbalballll descripcion oagfoasgjaosojagsojg jogosa gjo gasjog jgsaoo gjsgjsag sag jos
			        </p>
			        <br/>
                    <h5>Options</h5>
                    <%include file="/xinsider/select_student.html" args="select_id='student_select1', usernames_in=usernames_in" />
			    </div>
			    <!--Div that will hold the stacked bar chart-->
			    <div class="graph" id="video_prog_chart">
			    </div>
			    <div class="legend">
			    <h3 id="legend_title"></h3>
			    </div>
			</section>
			
			<section>
                <div class="sidebar">
                    <h2>Video time distribution chart </h2>
                    <p>
                        blablalbalbalballll descripcion oagfoasgjaosojagsojg jogosa gjo gasjog jgsaoo gjsgjsag sag jos
                    </p>
                    <br/>
                    <h5>Options</h5>
                    <%include file="/xinsider/select_student.html" args="select_id='student_select2', usernames_in=usernames_in" />
                </div>
                <!--Div that will hold the stacked bar chart-->
                <div class="graph" id="all_video_time">
                </div>
                <div class="legend">
                <h3 id="legend_title"></h3>
                </div>
            </section>
            
            <section>
                <div class="sidebar">
                    <h2>Problem time distribution </h2>
                    <p>
                        blablalbalbalballll descripcion oagfoasgjaosojagsojg jogosa gjo gasjog jgsaoo gjsgjsag sag jos
                    </p>
                    <br/>
                    <h5>Options</h5>
                    <%include file="/xinsider/select_student.html" args="select_id='student_select3', usernames_in=usernames_in" />    
                </div>
                <!--Div that will hold the stacked bar chart-->
                <div class="graph" id="per_problem_time">
                </div>
                <div class="legend">
                <h3 id="legend_title"></h3>
                </div>
            </section>
            
            <section>
                <div class="sidebar">
                    <h2>Repetitions per video intervals </h2>
                    <p>
                        blablalbalbalballll descripcion oagfoasgjaosojagsojg jogosa gjo gasjog jgsaoo gjsgjsag sag jos
                    </p>
                    <br/>
                    <h5>Options</h5>
                    <%include file="/xinsider/select_student.html" args="select_id='student_select4', usernames_in=usernames_in" />
                    <h5>Videos</h5>
                    <%include file="/xinsider/select_video.html" args="select_id='video_select4', video_names=video_names, video_ids=video_module_ids" />
                </div>
                <!--Div that will hold the stacked bar chart-->
                <div class="graph" id="video_intervals_chart">
                </div>
                <div class="legend">
                <h3 id="legend_title"></h3>
                </div>
            </section>
            
            <section>
                <div class="sidebar">
                    <h2>Daily time on video and problems </h2>
                    <p>
                        blablalbalbalballll descripcion oagfoasgjaosojagsojg jogosa gjo gasjog jgsaoo gjsgjsag sag jos
                    </p>
                    <br/>
                    <h5>Options</h5>
                    <%include file="/xinsider/select_student.html" args="select_id='student_select5', usernames_in=usernames_in" />            
                </div>
                <!--Div that will hold the stacked bar chart-->
                <div class="graph" id="vid_prob_daily_chart">
                </div>
                <div class="legend">
                <h3 id="legend_title"></h3>
                </div>
            </section>
            
            <section>
                <div class="sidebar">
                    <h2>Video events distribution within video length</h2>
                    <p>
                        blablalbalbalballll descripcion oagfoasgjaosojagsojg jogosa gjo gasjog jgsaoo gjsgjsag sag jos
                    </p>
                    <br/>
                    <h5>Options</h5>
                    <%include file="/xinsider/select_student.html" args="select_id='student_select6', usernames_in=usernames_in" />
                    <h5>Videos</h5>
                    <%include file="/xinsider/select_video.html" args="select_id='video_select6', video_names=video_names, video_ids=video_module_ids" />
                </div>
                <!--Div that will hold the stacked bar chart-->
                <div class="graph" id="dispersion_chart">
                </div>
                <div class="legend">
                <h3 id="legend_title"></h3>
                </div>
            </section>
            
			</div>
		</div>
		<%include file="/xinsider/select_adjustments.html" />
	</div>
</div>
